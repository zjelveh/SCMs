% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spec_curve_analysis.R
\name{run_spec_curve_analysis}
\alias{run_spec_curve_analysis}
\title{Run Specification Curve Analysis with Multiple Configurations}
\usage{
run_spec_curve_analysis(dataset, params, cores = 1, output_dir = NULL)
}
\arguments{
\item{dataset}{Data frame containing the panel data for analysis.}

\item{params}{List containing ALL analysis parameters including:
\itemize{
\item \code{outcomes} - Character vector of outcome variables (REQUIRED)
\item \code{col_name_unit_name} - Column name for unit identifiers
\item \code{name_treated_unit} - Name of treated unit
\item \code{covagg} - List of covariate specifications
\item \code{treated_period} - Treatment start period
\item \code{min_period} - Minimum period for analysis
\item \code{end_period} - Maximum period for analysis
\item \code{col_name_period} - Column name for time periods
\item \code{feature_weights} - Feature weighting methods
\item \code{donor_sample} - Donor sample selection methods
\item \code{outcome_models} - Outcome modeling approaches
\item \code{constraints} - Weight constraint specifications
\item \code{inference_type} - "placebo", "bootstrap", or "all" (default: "placebo")
\item \code{inference_config} - List with bootstrap_n_replications, verbose, etc.
\item \code{expected_direction} - "negative", "positive", or "two_sided" (default: "negative")
}}

\item{cores}{Integer. Number of cores for parallel processing (applies to both bootstrap and placebo inference unless overridden in params$inference_config).}

\item{output_dir}{Character. Directory to save results. If NULL, results are not saved.}
}
\value{
List structure containing:
\itemize{
\item \code{results} - Data.table in long format with all specification results
\item \code{abadie_inference} - Abadie placebo inference results (if inference_type includes "placebo")
\item \code{bootstrap_inference} - Bootstrap inference results (if inference_type includes "bootstrap")
}
}
\description{
Performs specification curve analysis across multiple modeling choices
and configurations, providing a systematic exploration of researcher degrees of freedom.
}
\details{
Run Comprehensive Specification Curve Analysis
}
\examples{
\dontrun{
params <- list(
  outcomes = "gdp",
  col_name_unit_name = "country",
  name_treated_unit = "West Germany",
  covagg = list(
    gdp_avg = list(var = "gdp", average = "full_pre")
  ),
  treated_period = 1990,
  min_period = 1975,
  end_period = 2003,
  col_name_period = "year",
  feature_weights = c("uniform"),
  donor_sample = c("all", "most_similar"),
  outcome_models = c("none", "lasso"),
  constraints = list(list(name = "simplex"))
)

# Run analysis with placebo inference (default)
results_placebo <- run_spec_curve_analysis(dataset, params)

# Run analysis expecting positive treatment effects
params_positive <- params
params_positive$expected_direction <- "positive"
results_positive <- run_spec_curve_analysis(dataset, params_positive)

# Run bootstrap inference with 4 cores
params_bootstrap <- params
params_bootstrap$inference_type <- "bootstrap"
params_bootstrap$inference_config <- list(bootstrap_n_replications = 1000)
results_bootstrap <- run_spec_curve_analysis(dataset, params_bootstrap, cores = 4)

# Run both inference methods for comparison  
params_both <- params
params_both$inference_type <- "all"
params_both$inference_config <- list(
  bootstrap_n_replications = 500,  # Fewer for speed when running both
  verbose = TRUE
)
results_both <- run_spec_curve_analysis(dataset, params_both, cores = 2)
}
}
