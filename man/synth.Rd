% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/formula_interface.R
\name{synth}
\alias{synth}
\title{Synthetic Control with Formula Interface}
\usage{
synth(
  formula,
  data,
  time.var,
  id.var,
  treated.period,
  pre.period,
  post.period,
  constraint = "simplex",
  feature.weights = "uniform",
  covariate.matching = "average",
  ...
)
}
\arguments{
\item{formula}{A formula object specifying the model. Format: \code{outcome ~ covariates | treated_unit}
where covariates specify matching variables and treated_unit identifies the treated unit.
Example: \code{gdp ~ population + investment | California}}

\item{data}{A data.frame or data.table containing the panel data}

\item{time.var}{Character. Name of time variable column}

\item{id.var}{Character. Name of unit identifier column}

\item{treated.period}{Numeric. First period when treatment begins}

\item{pre.period}{Numeric vector. Pre-treatment periods to use for matching}

\item{post.period}{Numeric vector. Post-treatment periods for outcome prediction}

\item{constraint}{Character or list. Weight constraint specification:
\itemize{
\item \code{"simplex"} - Standard synthetic control (default)
\item \code{"lasso"} - L1 penalized weights
\item \code{"ridge"} - L2 penalized weights
\item \code{"ols"} - Unconstrained weights
\item List with detailed constraint parameters
}}

\item{feature.weights}{Character. Feature weighting method ("uniform" or "optimize")}

\item{covariate.matching}{Character. How to aggregate covariates:
\itemize{
\item \code{"average"} - Use pre-period means (default)
\item \code{"each"} - Include each pre-period separately
\item \code{"last"} - Use only the last pre-treatment period
}}

\item{...}{Additional arguments passed to \code{scest()}}
}
\value{
An object of class "scest_formula" inheriting from "scest" with additional
formula-related metadata
}
\description{
Estimate synthetic control using standard R formula syntax. This function provides
a convenient interface that automatically handles data preparation and estimation based on
formula specification.
}
\details{
The formula interface translates standard R formula syntax into the appropriate scdata/scest calls:

\strong{Formula Components:}
\itemize{
\item Left side: Outcome variable
\item Right side (before |): Covariates for matching
\item Right side (after |): Treated unit identifier
}

\strong{Special Formula Syntax:}
\itemize{
\item \code{I(log(var))} - Transform variables
\item \code{var1 + var2} - Include multiple covariates
\item \code{.} - Include all available covariates
\item \code{-var} - Exclude specific variables from matching
}
}
\examples{
\dontrun{
# Basic formula interface
result <- synth(gdp ~ population + investment | California,
                data = panel_data,
                time.var = "year",
                id.var = "state", 
                treated.period = 1989,
                pre.period = 1980:1988,
                post.period = 1989:2000)

# With transformed variables
result <- synth(log(gdp) ~ log(population) + I(investment/1000) | California,
                data = panel_data,
                time.var = "year",
                id.var = "state",
                treated.period = 1989,
                pre.period = 1980:1988,
                post.period = 1989:2000,
                constraint = "lasso")

# Use all available covariates except one
result <- synth(gdp ~ . - population | California,
                data = panel_data,
                time.var = "year", 
                id.var = "state",
                treated.period = 1989,
                pre.period = 1980:1988,
                post.period = 1989:2000)
}
}
